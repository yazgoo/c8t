<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="app.css"/>
    <script src="build.js"></script>
    <title>c8t</title>
  </head>
  <body>
    <script src="pack.js"></script>
<div id="keys_container">
    <fieldset><legend>Keyboard</legend>
    <script>
window.key = null
for(var i = 0; i < 4; i++)
{
    for(var j = 0; j < 4; j++)
    {
        s = (4 * i + j).toString(16);
    document.write('<input id="key" type="button" value="' + s
            + '" onclick="window.key=0x' + s + '"/>')
    }
        document.write('<br/>')
}
    emulator = null
    function launch() {
        if(emulator != null) emulator.pause
        emulator = Opal.Runner.$new().$run(document.getElementById('editor').value);
    }
    function launch2() {
        if(emulator != null) emulator.pause
        emulator = Opal.Runner.$new().$run2(document.getElementById('editor').value);
    }
    function launch3(select) {
        game = pack[select]
        if(game == undefined) return;
        if(emulator != null) emulator.pause
        // Opal.Runner.$new().$disassemble()
        text = game['content']
        document.getElementById('editor').value = text
        var description = game['description'];
        if(description == null) description = "";
        description.replace("\n", "<br/>")
        document.getElementById('description').innerHTML = 
        "<b>" +game['title'] + "</b>, "
        + "by " +game['author'] + " "
        + "in " +game['date'] + "<hr/>"
        + description + ""
        emulator = Opal.Runner.$new().$run2(text);
    }
    </script>
</fieldset>
<fieldset>
        <legend>Control</legend>
    <input type="button" id="pause" value="||"
    onclick="if(!this.checked) { this.value = '&gt;'; this.checked = true}
    else { this.value = '||';this.checked = false }"/>
    <input type="button" id="step" value="step"
    onclick="if(emulator != null) emulator.step = true"/>
    log<input type="checkbox" id="log"/>
    <br/><input title="iterations per run" id="iterations"
    type="range" value="10" min="1" max="100"
    onchange="document.getElementById('iterations_text').value = this.value"/>
    <input type="text" id="iterations_text" value="10" size="3"
    readonly="true"/>
</fieldset>
    <fieldset>
        <legend>Launch from</legend>
    <select onchange="launch3(this.value)">
        <option>program</option>
    <script>
for(k in pack)
{

        document.write("<option value='"+ k +"'>" + pack[k]['short'] + "</option>");
}
    </script>
    </select>
    <br/>
    <input type="button" value="source" onclick="launch()"/>
    <input type="button" value="hexa" onclick="launch2()"/>
</fieldset>
<fieldset>
    <legend>Description</legend>
    <div id="description"></div>
</fieldset>
</div>
    <div id="screen_container">
        <canvas id="screen"></canvas>
    </div>
    <div id="editor_container">
        <a href="//flattr.com/submit/auto?user_id=yazgoo&url=http%3A%2F%2Fyazgoo.github.io%2Fc8t">
            <img src="app/flattr-badge-large.png" border="0"/></a>
        <a href="//github.com/yazgoo/c8t"><img id="github_ico"
            title="view github repo"
            src="app/github.ico" border="0"/></a>
        <a class="btn" href="//twitter.com/intent/tweet?text=http%3A%2F%2Fyazgoo.github.io%2Fc8t" title="reference on twitter">
            <i></i>
        </a>
<br/>
        <input type="button" value="clear"
        onclick="document.getElementById('editor').value=''"/>
        <input type="button" value="dis"
        onclick="document.getElementById('editor').value=
        Opal.Runner.$new().$disassemble(
        document.getElementById('editor').value)"/>
        <input type="button" value="asm"
        onclick="document.getElementById('editor').value=
        Opal.Runner.$new().$assemble(
        document.getElementById('editor').value)"/>
        <br/>
    <textarea id="editor">
LD v0, 0
LD v1, 0
LD v5, 0
loop:
    LD v2, k
    CALL multiply
    DRW v0, v1, 5
    ADD v0, 8
    ADD v5, 1
    JP loop
multiply:
    LD I, 0
    SE v2, 0
    call add_5
    RET
add_5:
    LD v3, 5
    LD v4, 1
    ADD I, v3
    SUB v2, v4
    SE v2, 0
    JP add_5
    RET</textarea>
    <br/>
    <a href="//www.chip8.com" title="more details on chip8">
        <img height="18" border="0"
        src="//www.chip8.com/images/title.png"></a>
    <a href="//devernay.free.fr/hacks/chip8/C8TECH10.HTM"
        title="chip8 documentation">
        <img height="18" border="0" src="//devernay.free.fr/favicon.ico"/></a>
    <a href="//opalrb.org" title="built with opalrb">
        <img src="//opalrb.org/favicon.ico"/></a>
</div>
  </body>
</html>
